# cppunittest fault
# dbaccess_dialog_save

[CUT] dbaccess_dialog_save
Illegal instruction (core dumped)
[_RUN_____] DialogSaveTest::test
warn:legacy.osl:833:833:dbaccess/source/core/dataaccess/ModelImpl.cxx:764: source to create the storage from!
warn:legacy.osl:833:833:dbaccess/source/core/dataaccess/ModelImpl.cxx:764: source to create the storage from!
warn:legacy.osl:833:833:dbaccess/source/core/dataaccess/ModelImpl.cxx:764: source to create the storage from!
warn:dbaccess:833:833:dbaccess/source/filter/xml/xmlTable.cxx:76: unknown :database:1.0 db:command value=SELECT "Assets"."AssetID" AS "AssetID", "Asssets" WHERE ( "Assets"."AssetID" = 38353 )
warn:dbaccess:833:833:dbaccess/source/filter/xml/xmlQuery.cxx:54: unknown :database:1.0 db:name value=Query_Assets
warn:vcl.layout:833:833:vcl/source/window/layout.cxx:290: nExtraSpace went
warn:vcl.layout:833:833:vcl/source/window/layout.cxx:290: nExtraSpace wentow/panel
warn:vcl.layout:833:833:vcl/source/window/layout.cxx:290: nExtraSpace wentitleWindow
warn:vcl.layout:833:833:vcl/source/window/layout.cxx:290: nExtraSpace wentow/detail
warn:vcl.layout:833:833:vcl/source/window/layout.cxx:290: nExtraSpace wentow/AppDetailWindow
warn:vcl.layout:833:833:vcl/source/window/layout.cxx:290: nExtraSpace wentow/tasks
warn:vcl.layout:833:833:vcl/source/window/layout.cxx:290: nExtraSpace wentitleWindow
warn:vcl.layout:833:833:vcl/source/window/layout.cxx:290: nExtraSpace wentow/container
warn:vcl.layout:833:833:vcl/source/window/layout.cxx:290: nExtraSpace wentitleWindow

It looks like /home/infinity/libreoffice/workdir/LinkTarget/Executable/cpp/workdir/CppunitTest/dbaccess_dialog_save.test.core/core
Backtraces:
<frozen importlib._bootstrap>:914: ImportWarning: GdbRemoveReadlineFinder.ule()
[New LWP 833]
[New LWP 836]
[Thread debugging using libthread_db enabled]
Using host libthread_db library "/lib/riscv64-linux-gnu/libthread_db.so.1"
Core was generated by `/home/infinity/libreoffice/workdir/LinkTarget/Execu
Program terminated with signal SIGILL, Illegal instruction.
#0  0x00555555619f4038 in ?? ()
[Current thread is 1 (Thread 0x55555561daa130 (LWP 833))]
/lib/riscv64-linux-gnu/../../share/gcc/python/libstdcxx/v6/printers.py:120'\d'
  self.typename = re.sub('^std::experimental::fundamentals_v\d::', 'std::e
/lib/riscv64-linux-gnu/../../share/gcc/python/libstdcxx/v6/printers.py:121'\w'
  mgrname = re.sub("std::string(?!\w)", str(gdb.lookup_type('std::string')
/lib/riscv64-linux-gnu/../../share/gcc/python/libstdcxx/v6/printers.py:124'\d'
  self.typename = re.sub('^std::(experimental::|)(fundamentals_v\d::|)(.*)
/lib/riscv64-linux-gnu/../../share/gcc/python/libstdcxx/v6/xmethods.py:151\d'
  if not re.match('^std::(__\d+::)?array<.*>$', class_type.tag):
/lib/riscv64-linux-gnu/../../share/gcc/python/libstdcxx/v6/xmethods.py:268\d'
  if not re.match('^std::(__\d+::)?deque<.*>$', class_type.tag):
/lib/riscv64-linux-gnu/../../share/gcc/python/libstdcxx/v6/xmethods.py:312\d'
  if not re.match('^std::(__\d+::)?forward_list<.*>$', class_type.tag):
/lib/riscv64-linux-gnu/../../share/gcc/python/libstdcxx/v6/xmethods.py:393\d'
  if not re.match('^std::(__\d+::)?(__cxx11::)?list<.*>$', class_type.tag)
/lib/riscv64-linux-gnu/../../share/gcc/python/libstdcxx/v6/xmethods.py:508\d'
  if not re.match('^std::(__\d+::)?vector<.*>$', class_type.tag):
/lib/riscv64-linux-gnu/../../share/gcc/python/libstdcxx/v6/xmethods.py:557\d'
  if not re.match('^std::(__\d+::)?%s<.*>$' % self._name, class_type.tag):
/lib/riscv64-linux-gnu/../../share/gcc/python/libstdcxx/v6/xmethods.py:590\d'
  if re.match('^std::(__\d+::)?__uniq_ptr_(data|impl)<.*>$', impl_type):
/lib/riscv64-linux-gnu/../../share/gcc/python/libstdcxx/v6/xmethods.py:592\d'
  elif re.match('^std::(__\d+::)?tuple<.*>$', impl_type):
/lib/riscv64-linux-gnu/../../share/gcc/python/libstdcxx/v6/xmethods.py:654\d'
  if not re.match('^std::(__\d+::)?unique_ptr<.*>$', class_type.tag):
/lib/riscv64-linux-gnu/../../share/gcc/python/libstdcxx/v6/xmethods.py:723\['
  m = re.match('.*\[(\d+)]$', str(self._elem_type))
/lib/riscv64-linux-gnu/../../share/gcc/python/libstdcxx/v6/xmethods.py:772\d'
  if not re.match('^std::(__\d+::)?shared_ptr<.*>$', class_type.tag):
ra             0x55555561e7bad4 0x55555561e7bad4 <cppu::throwException(com
sp             0xffffffc4093f20 0xffffffc4093f20
gp             0xaaaaaab3b67800 0xaaaaaab3b67800
tp             0x55555561daa8d0 0x55555561daa8d0
t0             0x1      1
t1             0x55555564b3e23c 24019198270497340
t2             0x3ff    1023
fp             0xffffffc4093fd0 0xffffffc4093fd0
s1             0x55555561fed668 24019198225077864
a0             0xaaaaaadfe389d8 48038396918204888
a1             0xffffffc4094070 72057593031901296
a2             0x0      0
a3             0x6      6
a4             0x555555619f4038 24019198218813496
a5             0xaaaaaadfe389d8 48038396918204888
a6             0x0      0
a7             0xaaaaaadfe38850 48038396918204496
s2             0x55555562ab9bf2 24019198236400626
s3             0xffffffc4095178 72057593031905656
s4             0xaaaaaaea25b6a0 48038397090313888
s5             0xaaaaaaea25b6a0 48038397090313888
s6             0xfffffffbad75ea 72057593965409770
s7             0xaaaaab157ddbb0 48038397817510832
s8             0x0      0
s9             0x8      8
s10            0xf      15
s11            0xaaaaab157dc218 48038397817504280
t3             0x55555561935d74 24019198218034548
t4             0xf      15
t5             0x0      0
t6             0x0      0
pc             0x555555619f4038 0x555555619f4038

Thread 2 (Thread 0x555555724af7d0 (LWP 836)):
#0  futex_wait (private=0, expected=2, futex_word=0xaaaaaadedbed90) at ../
        __ret = -512
        err = <optimized out>
#1  __lll_lock_wait (futex=0xaaaaaadedbed90, private=<optimized out>) at l
#2  0x0055555561c69fce in __GI___pthread_mutex_lock (mutex=0xaaaaaadedbed9
        __futex = 0xaaaaaadedbed90
        id = <optimized out>
        type = <optimized out>
        __PRETTY_FUNCTION__ = "__pthread_mutex_lock"
        id = <optimized out>
#3  0x0055555561961288 in osl_acquireMutex () at /home/infinity/libreoffic
#4  0x005555556562d064 in osl::Mutex::acquire() () at /home/infinity/libre
#5  0x0055555565fbefd6 in SvpSalYieldMutex::doAcquire(unsigned int) () at .cxx:380
#6  0x0055555569bcad58 in comphelper::SolarMutex::acquire(unsigned int) ()er/solarmutex.hxx:86
#7  0x0055555569bcff78 in osl::ClearableGuard<comphelper::SolarMutex>::Clee/infinity/libreoffice/include/osl/mutex.hxx:180
#8  0x0055555569bcffd2 in osl::ResettableGuard<comphelper::SolarMutex>::Reome/infinity/libreoffice/include/osl/mutex.hxx:235
#9  0x0055555569bcae10 in SolarMutexResettableGuard::SolarMutexResettableG/vcl/svapp.hxx:1384
#10 0x0055555569bcb25c in dbaccess::ModelMethodGuard::ModelMethodGuard(dbaome/infinity/libreoffice/dbaccess/source/core/inc/ModelImpl.hxx:524
#11 0x0055555569bcc706 in dbaccess::DocumentGuard::DocumentGuard(dbaccess:ard::MethodUsedDuringInit_) () at /home/infinity/libreoffice/dbaccess/sour
#12 0x0055555569bc8950 in dbaccess::ODatabaseDocument::getEvents() () at /dataaccess/databasedocument.cxx:2024
#13 0x0055555569c28190 in dbaccess::DocumentEventExecutor::documentEventOconst&) () at /home/infinity/libreoffice/dbaccess/source/core/dataaccess/do
#14 0x0055555569c2e05a in comphelper::OInterfaceContainerHelper3<com::sun:ySingleListener<com::sun::star::document::DocumentEvent>::operator()(com::ent::XDocumentEventListener> const&) const () at /home/infinity/libreoffic2
#15 0x0055555569c2cd7c in void comphelper::OInterfaceContainerHelper3<com:forEach<comphelper::OInterfaceContainerHelper3<com::sun::star::document::Xm::sun::star::document::DocumentEvent> >(comphelper::OInterfaceContainerHeistener>::NotifySingleListener<com::sun::star::document::DocumentEvent> cocomphelper/interfacecontainer3.hxx:274
#16 0x0055555569c2bc36 in void comphelper::OInterfaceContainerHelper3<com:notifyEach<com::sun::star::document::DocumentEvent>(void (com::sun::star::star::document::DocumentEvent const&), com::sun::star::document::DocumentEnclude/comphelper/interfacecontainer3.hxx:289
#17 0x0055555569c2a35a in dbaccess::DocumentEventNotifier_Impl::impl_notifntEvent const&) () at /home/infinity/libreoffice/dbaccess/source/core/data
#18 0x0055555569c2a702 in dbaccess::DocumentEventNotifier_Impl::processEveinity/libreoffice/dbaccess/source/core/dataaccess/documenteventnotifier.cx
#19 0x00555555622e5296 in comphelper::AsyncEventNotifierBase::execute() ()e/misc/asyncnotification.cxx:139
#20 0x00555555622e5a98 in comphelper::AsyncEventNotifierAutoJoin::run() ()e/misc/asyncnotification.cxx:246
#21 0x00555555622e7c82 in threadFunc () at /home/infinity/libreoffice/incl
#22 0x00555555619796ee in osl_thread_start_Impl(void*) () at /home/infinit
#23 0x0055555561c685fa in start_thread (arg=<optimized out>) at pthread_cr
        ret = <optimized out>
        pd = <optimized out>
        unwind_buf = {cancel_jmp_buf = {{jmp_buf = {{__pc = 240191982213872608, 72057593031907038, 72057593031907039, 0, 24019198498502608, 72057593, 1, 24019198221464480, 33}, __sp = 24019198498500336, __fpregs = {0 <repe{pad = {0x0, 0x0, 0x0, 0x0}, data = {prev = 0x0, cleanup = 0x0, canceltype
        not_first_call = <optimized out>
        robust = <optimized out>
#24 0x0055555561d220b2 in __thread_start () at ../sysdeps/unix/sysv/linux/

Thread 1 (Thread 0x55555561daa130 (LWP 833)):
#0  0x00555555619f4038 in  ()


Error: a unit test failed, please do one of:

make CppunitTest_dbaccess_dialog_save CPPUNITTRACE="gdb --args"
    # for interactive debugging on Linux
make CppunitTest_dbaccess_dialog_save VALGRIND=memcheck
    # for memory checking
make CppunitTest_dbaccess_dialog_save DEBUGCPPUNIT=TRUE
    # for exception catching

You can limit the execution to just one particular test by:

make CPPUNIT_TEST_NAME="testXYZ" ...above mentioned params...

make[1]: *** [/home/infinity/libreoffice/solenv/gbuild/CppunitTest.mk:121:/dbaccess_dialog_save.test] Error 1
make: *** [Makefile:288: build] Error 2